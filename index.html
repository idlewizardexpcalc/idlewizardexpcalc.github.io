<!DOCTYPE html>
<html>
	<body>
	<title>Idle Wizard Experience Calc</title>
	<h1>Idle Wizard Experience Calculator</h1>
	<p>Release Date: 12/2019 </p>
	<p>Revision: 3/24/2020 -- to update for paragon/legacy changes due to Version 1.0.0</p>
	<p>For use with: <a href="https://idle-wizard.fandom.com/wiki/Character_Leveling_Guide_%28240%2B%29">
Character Leveling Guide (240+)</a> by Rhasntsul</p>
	<p>For the awesome idle game created by: Vadim 'exsercrat' Salnikov (exsercrat#7843)</br>
	Logic/Formulas reversed engineered by: Spazou#9809 </br>
	In extensive collboration with Rhasntsul#7935 and based off his spreadsheet</br>
	Ported to the web by: Kamio#7389</p>
	<p>Fill out the following information, then click "Calculate"</br>
	If it starts get bug out, press F5 to refresh</p>
	<table>
	<tr>
	<td>
	<h2>Basics:</h2>
	<p>
		Class: 
		<select id="class">
		<option value="Abo">Abolisher</option>
		<option value="Arch">Archon</option>
		<option value="Deso">Desolator/Umbramancer</option>
		<option value="Here">Heretic/Exorcist</option>
		<option value="Prod">Prodigy/Temporalist</option>
		<option value="Other">Other</option>
		
		</select>
		Pet:
		<select id="pet">
		<option value="Homu">Homunculus</option>
		<option value="Simu">Simulacrum</option>
		<option value="GC">Greater Chimaera/Doppelganger</option>
		<option value="SS">Soulstealer</option>
		<!-- <option value="Other">Other</option> -->
		</select>
	</p>
	<!--<p> Mana Sources: <input type="text" id="manaSources" value="100000"></br> -->
	<p>
		<table>
		<tr>
			<td><b>Mana</b></td>
		</tr>
		<tr>
			<td id="curMana_txt">Current Mana (X.XXEYY):</td><td><input type="text" id="cur_mana" value="1.00E12"></td>
		</tr>
		<tr>
			<td id="maxMana_txt">Max Manu (X.XXEYY):</td><td><input type="text" id="max_mana" value="1.00E12"></td>
		</tr>
		<tr>
			<td><b>Void Entities / Liquid Shadow / Hallow Clicks</b></td>
		</tr>
		<tr>
			<td id="voidEnt_txt">Void Entities (X.XXEYY):</td><td><input type="text" id="voidEnts" value="1.00E12"></td>
		</tr>
		<tr>
			<td id="liqShad_txt">Liquid Shadow Spent (X.XXEYY):</td><td><input type="text" id="spentLS" value="1.00E12"></td>
		</tr>
		<tr>
			<td id="voidEnt_txt">Excess Hallowed Clicks (X.XXEYY):</td><td><input type="text" id="eHC" value="1.00E12"></td>
		</tr>
		<tr>
			<td><b>Autoclicks / Spellcasts</b></td>
		</tr>
		<tr>
			<td id="ACtxt"> Autoclicks (X.XXEYY):</td><td><input type="text" id="autoClicks" value="1.00E12"></td>
		</tr>
		<tr>
			<td id="SCtxt"> Spellcasts (X.XXEYY):</td><td><input type="text" id="spellCasts" value="1.00E12"></td>
		</tr>
		<tr>
			<td><b>Additional Info:</b></td>
		</tr>
		<tr>
			<td id="startlvl_txt">Starting Level:</td><td><input type="text" id="startLevel" value="12"></td>
		</tr>
		<tr>
			<td id="finishlvl_txt">Level Wanted: </td><td><input type="text" id="finishLevel" value="270"></td>
		</tr>
		<tr>
			<td id="tsCasts_txt">True Sorcery Casts (X.XXEYY):</td><td><input type="text" id="tsCasts" value="1.00E12"></td>
		</tr>
		</table>
	</p>
	<h2>Additional Details:</h2>
	<p id="pwtxt">Progress Week: <input type="checkbox" id="progressWeek"></br>
	</p>
	<p>
	Legacy: 
	<select id="paragons">
		<option value="0">None</option>
		<option value="1">1</option>
		<option value="5">5+</option>
		<option value="7">7+</option>
		<option value="18">18+</option>
		<option value="20">20+</option>
		<option value="25">25+</option>
		<option value="27">27+</option>
		<option value="31">31+</option>
		<option value="37">37+</option>
		<option value="42">42+</option>
		<option value="49">49+</option>
		<option value="56">56+</option>
		<option value="60">60+</option>
		<option value="64">64+</option>
		<option value="72">72+</option>
	</select>
	</p>
	<p>
	Mastery Points: 
	<select id="masteryPoints">
		<option value="1">None</option>
		<option value="50">50</option>
		<option value="75">75</option>
		<option value="175">175</option>
		<option value="225">225</option>
	</select>
	</p>
Challenges:
<table>
	<tr>
		<td>
		<table>
			<tr>
			<td id="c10t">10.) Spell-Sources</td><td><input type="checkbox" id="c10" checked="false"></td>
			</tr>
			<tr>
			<td id="c17t">17.) Full-Power Alchemist</td><td><input type="checkbox" id="c17" checked="false"></td>
			</tr>
			<tr>
			<td id="c18t">18.) Full-Power Alchemist II</td><td><input type="checkbox" id="c18" checked="false"></td>
			</tr>
			<tr>
			<td id="c19t">19.) Full-Power Alchemist III</td><td><input type="checkbox" id="c19" checked="false"></td>
			</tr>
			<tr>
			<td id="c37t">37.) Unstable Curse</td><td><input type="checkbox" id="c37" checked="false"></td>
			</tr>
		</table>
		</td>
		<td>
		<table>
			<tr>
			<td id="c38t">38.) Unstable Curse II</td><td><input type="checkbox" id="c38" checked="false"></td>
			</tr>
			<tr>
			<td id="c39t">39.) Unstable Curse III</td><td><input type="checkbox" id="c39" checked="false"></td>
			</tr>
			<tr>
			<td id="c67t">67.) Experiments with Anomaly IV</td><td><input type="checkbox" id="c67" checked="false"></td>
			</tr>
			<tr>
			<td id="c70t">70.) Unstable Time</td><td><input type="checkbox" id="c70" checked="false"></td>
			</tr>
			<tr>
			<td id="c71t">71.) Training Hunger</td><td><input type="checkbox" id="c71" checked="false"></td>
			</tr>
		</table>
		</td>
		<td>
		<table>
			<tr>
			<td id="c95t">95.) Children of the Night</td><td><input type="checkbox" id="c95" checked="false"></td>
			</tr>
			<tr>
			<td id="c96t">96.) Children of the Night II</td><td><input type="checkbox" id="c96" checked="false"></td>
			</tr>
			<tr>
			<td id="c97t">97.) Children of the Night III</td><td><input type="checkbox" id="c97" checked="false"></td>
			</tr>
			<tr>
			<td id="c98t">98.) Reality Decompression</td><td><input type="checkbox" id="c98" checked="false"></td>
			</tr>
			<tr>
			<td id="c99t">99.) Absorption</td><td><input type="checkbox" id="c99" checked="true"></td>
			</tr>
		</table>
		</td>
	</tr>
</table>
</p>
<h2>Secret Achievements:</h2>
<p id="mplTxt">Much Potential Left  <input type="checkbox" id="muchPot"></br></p>
<p id="mgTxt">Mighty Group <input type="checkbox" id="mightyGroup"></br></p>
<h2>Items:</h2>
<p id="NWtxt"> Nomadic Wrists 
<select id="Nomadic">
<option value="None">Not Equipped</option>
<option value="Rare">Rare</option>
<option value="Epic">Epic</option>
<option value="Leg">Legendary</option>
</select>
</p>
<p id="HEPtxt"> Hollow Eye Pendant
<select id="HollowEye">
<option value="None">Not Equipped</option>
<option value="Rare">Rare</option>
<option value="Epic">Epic</option>
<option value="Leg">Legendary</option>
</select>
</p>
<p id="EPtxt"> Endless Pouches
<select id="Endless">
<option value="1">Not Equipped</option>
<option value="1.25">Uncommon</option>
<option value="1.75">Rare</option>
<option value="2">Epic</option>
<option value="2.5">Legendary</option>
</select>
</p>
<p id="CLtxt"> Casque of Learning
<select id="Casque">
<option value="1">Not Equipped</option>
<option value="1.2">Epic</option>
<option value="2">Legendary</option>
</select>
</p>
<p id="GJtxt"> The Great Journey
<select id="Great">
<option value="1">Not Equipped</option>
<option value="1.25">Common</option>
<option value="1.5">Uncommon</option>
<option value="1.75">Rare</option>
<option value="2">Epic</option>
<option value="2">Legendary</option>
</select>
</p>
<p id="AStxt"> Artificer's Shoulderpads
<select id="Artificer">
<option value="1">Not Equipped</option>
<option value="1.15">Epic</option>
<option value="1.5">Legendary</option>
</select>
</p>
</td>
<td>
<h1> Outputs: </h1>

<table>
	<tr>
		<td>Mana Sources (calculated): </td><td id="manaSources">X</td>
	</tr>
	<tr>
		<td>Current XP </td><td id="cur_XP">X</td>
	</tr>
	<tr>
		<td>Goal XP </td><td id="goal_XP">X</td>
	</tr>
	<tr>
		<td>XP Neeeded for Goal </td><td id="needed_XP">X</td>
	</tr>
</table>
</br>

</br>
	<table>
		<tr>
			<td id="Tot_TS_Cast_Needed"> X </td>
			<td> Total TS Cast Needed </td>
		</tr>
		<tr>
			<td id="TS_Cast_Needed"> X </td>
			<td>TS Cast Needed </td>
		</tr>
	</table>
</br>
	<table>
		<tr>
			<td id="AXP"> X </td>
			<td> Active XP </td>
		</tr>
		<tr>
			<td id="SXP"> X </td>
			<td>Source XP </td>
		</tr>
	</table>
</br>

Time to Goal
	<table>
		<tr>
			<td id="ToG_Reg_Min"> X </td>
			<td> Minutes </td>
		</tr>
		<tr>
			<td id="ToG_Reg_Hrs"> X </td>
			<td> Hours </td>
		</tr>
		<tr>
			<td id="ToG_Reg_Days"> X </td>
			<td> Days </td>
		</tr>
		<tr>
			<td id="ToG_Reg_Wks"> X </td>
			<td> Weeks </td>
		</tr>
		<tr>
			<td id="ToG_Reg_Mths"> X </td>
			<td> Months </td>
		</tr>
	</table>
</br>
Time to Goal during Persistence Week
	<table>
		<tr>
			<td id="ToG_Per_Min"> X </td>
			<td> Minutes </td>
		</tr>
		<tr>
			<td id="ToG_Per_Hrs"> X </td>
			<td> Hours </td>
		</tr>
		<tr>
			<td id="ToG_Per_Days"> X </td>
			<td> Days </td>
		</tr>
		<tr>
			<td id="ToG_Per_Wks"> X </td>
			<td> Weeks </td>
		</tr>
		<tr>
			<td id="ToG_Per_Mths"> X </td>
			<td> Months </td>
		</tr>
	</table>
</td>
</table>


<script>
function Calc()
{

	format();
	
	var petObj = { base: "", exp: ""};

	var cls = document.getElementById("class").value;
	var pet = document.getElementById("pet").value;
	
	if (cls=="Arch")
	{
		document.getElementById("pet").value = "SS";
		pet = "SS";
		petObj.base = 1;
		petObj.exp = 4;
		
	} else if (cls=="Abo")
	{
		document.getElementById("pet").value = "GC";
		pet = "GC";
		petObj.base = 1;
		petObj.exp = 3;
	} else
	{
		pet = document.getElementById("pet").value;
		if (pet == "Simu" )
		{	
			petObj.base = .5;
			petObj.exp = 3;
		}else if(pet == "Homu")
		{
			petObj.base = 1;
			petObj.exp = 1;
		}else if(pet == "GC")
		{
			petObj.base = 1;
			petObj.exp = 3;
		}else
		{
			petObj.base = 1;
			petObj.exp = 0;
		}
	}
	console.debug("petObj: "+petObj);
	
	
	var cur_manaObj = { base: "", exp: ""};
	var max_manaObj = { base: "", exp: ""};
	var acObj = {base: "", exp: ""};
	var veObj = {base: "", exp: ""};
	var hcObj = {base: "", exp: ""};
	var lsObj = {base: "", exp: ""};
	var scObj = {base: "", exp: ""};
	var tsObj = {base: "", exp: ""};

	splitSci(cur_manaObj,document.getElementById("cur_mana"));
	splitSci(max_manaObj,document.getElementById("max_mana"));
	splitSci(acObj,document.getElementById("autoClicks"));
	splitSci(veObj,document.getElementById("voidEnts"));
	splitSci(lsObj,document.getElementById("spentLS"));
	splitSci(hcObj,document.getElementById("eHC"));
	splitSci(scObj,document.getElementById("spellCasts"));
	splitSci(tsObj,document.getElementById("tsCasts"));

	var acNum = fromSci(acObj);
	var veNum = fromSci(veObj);
	var hcNum = fromSci(hcObj);
	var lsNum = fromSci(lsObj);
	var scNum = fromSci(scObj);
	var tsNum = fromSci(tsObj);
	
	var manaSrc = mSource(max_manaObj,cls,petObj);
	document.getElementById("manaSources").innerHTML = manaSrc;
	console.debug("manasources_---MS---:"+manaSrc);
	document.getElementById("manaSources").style.backgroundColor = "orange";

	var tsSourceXP = (Math.pow(((tsNum+1)/1000),0.35)+1);

	var startLvl = document.getElementById("startLevel").value;
	startLvl = 100/9*Math.pow(1.09,startLvl-1)*1500+1;
	console.debug("----startLvl_usedInCurrentXP_Calc----");
	console.debug("startLvl: "+startLvl);

	var finishLvl = document.getElementById("finishLevel").value;

	document.getElementById("AXP").innerHTML = "???";
	var aXP=0;
	aXP = activeXP();
	//aXP = Math.round(aXP);
	aXPs = toScientfic(aXP);
	document.getElementById("AXP").innerHTML = aXPs;
	document.getElementById("AXP").style.backgroundColor = "orange"

	document.getElementById("SXP").innerHTML = "???";
	var sXP=0;
	sXP = sourceXP(tsNum,cls);
	//sXP = Math.round(sXP);
	sXPs = toScientfic(sXP);
	document.getElementById("SXP").innerHTML = sXPs;
	document.getElementById("SXP").style.backgroundColor = "orange"
	
	//var manaSrc = document.getElementById("manaSources").value;
	console.debug('lalalalala:'+sXP);
	console.debug('lalalalala2:'+manaSrc);
	manaSrc = Math.pow(sXP * manaSrc + 1,0.855);
	//console.debug("----manaSrc_usedInCurrentXP_Calc----");
	//console.debug("manaSrc:"+manaSrc);
	
	var cur_mana = Number(cur_manaObj.exp) + Number(Math.log10(cur_manaObj.base));
	//console.debug("cur_manaObj.exp: "+cur_manaObj.exp);
	//console.debug("cur_manaObj.base: "+cur_manaObj.base);
	//console.debug("log10(cur_manaObj.base): "+Math.log10(cur_manaObj.base));
	console.debug("----cur_mann_usedInCurrentXP_Calc----");
	console.debug("cur_mana:"+cur_mana);

	var ac = Math.log10(aXP*acNum+1);
	//console.debug("aXP: "+aXP);
	//console.debug("acNum: "+acNum);
	console.debug("----ac_usedInCurrentXP_Calc----");
	console.debug("ac:"+ac);
	
	var ve=0;
	if (cls=="Deso")
	{
		ve = Math.log(aXP*(veNum+(lsNum/1000))+1);
	}else if (cls=="Here")
	{
		ve = Math.log(aXP*(veNum+hcNum)+1);
	}else
	{
		ve = Math.log(aXP*veNum+1);
	}
	console.debug("veNum: "+veNum);
	console.debug("ve:"+ve);

	var sc = Math.log(aXP*scNum+1);
	console.debug("scNum: "+scNum);
	console.debug("sc:"+sc);

	document.getElementById("cur_XP").innerHTML = "???";
	var cXP=startLvl-100+(100+manaSrc)*(cur_mana+1)*(ac+1)*(ve/2+1)*(sc/4+1);
	console.debug("cXP:"+cXP);
	cXPs = toScientfic(cXP);
	document.getElementById("cur_XP").innerHTML = cXPs;
	document.getElementById("cur_XP").style.backgroundColor = "yellow"

	document.getElementById("goal_XP").innerHTML = "???";
	var gXP=(1-Math.pow(1.09,finishLvl-1)*1500/-0.09);
	console.debug("gXP:"+gXP);
	gXPs = toScientfic(gXP);
	document.getElementById("goal_XP").innerHTML = gXPs;
	document.getElementById("goal_XP").style.backgroundColor = "yellow"

	document.getElementById("needed_XP").innerHTML = "???";
	var nXP=gXP-cXP
	console.debug("nXP:"+nXP);
	nXPs = toScientfic(nXP);
	document.getElementById("needed_XP").innerHTML = nXPs;
	document.getElementById("needed_XP").style.backgroundColor = "yellow"
	

	//document.getElementById("Tot_TS_Cast_Needed").innerHTML = "???"
	//document.getElementById("TS_Cast_Needed").innerHTML = "???"
	
	if (cls=="Prod")
	{
	
	var TotTS = Math.pow((Math.pow(gXP/cXP,1/0.855)*tsSourceXP-1),1/0.35)*1000;
	console.debug("TotTS:"+TotTS);
	TotTSs = toScientfic(TotTS);
	document.getElementById("Tot_TS_Cast_Needed").innerHTML = TotTSs;
	document.getElementById("Tot_TS_Cast_Needed").style.backgroundColor = "yellow"
	

	document.getElementById("TS_Cast_Needed").innerHTML = "???"
	var TSneed = TotTS-tsNum;
	console.debug("TSneed:"+TSneed);
	TSneeds = toScientfic(TSneed);
	document.getElementById("TS_Cast_Needed").innerHTML = TSneeds;
	document.getElementById("TS_Cast_Needed").style.backgroundColor = "yellow"
	} else
	{
		document.getElementById("Tot_TS_Cast_Needed").innerHTML = "N/A";
		document.getElementById("TS_Cast_Needed").innerHTML = "N/A";
		document.getElementById("TS_Cast_Needed").style.backgroundColor = "red"
		document.getElementById("Tot_TS_Cast_Needed").style.backgroundColor = "red"
	}
	

}

function sourceXP(tsNum,cc)
{
	var s=1;
	var leg=0;
	
	leg = Number(document.getElementById("paragons").value)

	if (document.getElementById("muchPot").checked == true)
	{
		//console.debug("s");
		s=s*1.15;
	}
	if (document.getElementById("masteryPoints").value == "225")
	{
		s=s*1.796875;
	}else if (document.getElementById("masteryPoints").value == "175")
	{
		s=s*1.4375;
	}else if (document.getElementById("masteryPoints").value == "75")
	{
		s=s*1.15;
	}
	if (leg < 7)
	{
		s=s*1.05;
	}
	if (leg < 20)
	{
		s=s*1.10;
	}
	if (leg < 27)
	{
		s=s*1.15;
	}
	if (leg < 56)
	{
		s=s*1.20;
	}
	if (leg <= 72)
	{
		s=s*1.25;
	}
	if (document.getElementById("c96").checked == true)
	{
		s=s*1.5;
	}
	if (document.getElementById("c97").checked == true)
	{
		s=s*1.5;
	}
	if (document.getElementById("c99").checked == true)
	{
		s=s*1.5;
	}
	if (document.getElementById("HollowEye").value == "Leg")
	{
		s=s*1.35;
	}else if (document.getElementById("HollowEye").value == "Epic")
	{
		s=s*1.35;
	}else if (document.getElementById("HollowEye").value == "Rare")
	{
		s=s*1;
	}
	if (document.getElementById("Nomadic").value == "Leg")
	{
		s=s*1.75;
	}else if (document.getElementById("Nomadic").value == "Epic")
	{
		s=s*1.5;
	}else if (document.getElementById("Nomadic").value == "Rare")
	{
		s=s*1.2;
	}
	if (document.getElementById("progressWeek").checked == true)
	{
		s=s*1.2;
	}
		if(cc=="Prod")
		{
			s=s*(Math.pow(((tsNum+1)/1000),0.35)+1)
			console.debug("----tsNum_TS_SourceXP_Multi----");
			console.debug("tsNum: "+tsNum);
			console.debug((Math.pow(((tsNum+1)/1000),0.35)+1));
		}
		console.debug("----s_sourceXP----");
		console.debug("s: "+s);
	return s;
}

function activeXP()
{
	var z=1;
	
if (document.getElementById("mightyGroup").checked == true)
	{
		//console.debug("a");
		z=z*1.1;
	}
if (document.getElementById("masteryPoints").value >= 50)
	{
		z=z*1.5;
	}
if (document.getElementById("paragons").value == 5)
	{
		z=z*1.5;
	}else if (document.getElementById("paragons").value == 18)
	{
		z=z*1.5*1.5;
	}else if (document.getElementById("paragons").value == 25)
	{
		z=z*1.5*1.5*1.5;
	}else if (document.getElementById("paragons").value == 31)
	{
		z=z*1.5*1.5*1.5*1.5;
	}else if (document.getElementById("paragons").value == 37)
	{
		z=z*1.5*1.5*1.5*1.5*1.5;
	}else if (document.getElementById("paragons").value >= 42)
	{
		z=z*1.5*1.5*1.5*1.5*1.5*2;
	}else if (document.getElementById("paragons").value >= 49)
	{
		z=z*1.5*1.5*1.5*1.5*1.5*2*2;
	}else if (document.getElementById("paragons").value >= 60)
	{
		z=z*1.5*1.5*1.5*1.5*1.5*2*2*2;
	}else if (document.getElementById("paragons").value >= 72)
	{
		z=z*1.5*1.5*1.5*1.5*1.5*2*2*2*2;
	}
if (document.getElementById("c10").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("c17").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("c18").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("c19").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("c37").checked == true)
	{
		z=z*1.75;
	}
if (document.getElementById("c38").checked == true)
	{
		z=z*1.75;
	}
if (document.getElementById("c39").checked == true)
	{
		z=z*1.75;
	}
if (document.getElementById("c67").checked == true)
	{
		z=z*1.75;
	}
if (document.getElementById("c70").checked == true)
	{
		z=z*1.75;
	}
if (document.getElementById("c71").checked == true)
	{
		z=z*2;
	}
if (document.getElementById("c95").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("c98").checked == true)
	{
		z=z*1.5;
	}
if (document.getElementById("HollowEye").value == "Leg" || document.getElementById("HollowEye").value == "Epic" || document.getElementById("HollowEye").value == "Rare")
	{
		z=z*2;
	}
if (document.getElementById("progressWeek").checked == true)
	{
		z=z*2;
	}
		z=z*document.getElementById("Endless").value;
		z=z*document.getElementById("Casque").value;
		z=z*document.getElementById("Great").value;
		z=z*document.getElementById("Artificer").value;
		console.debug("----z_activeXP----");
		console.debug("z: "+z);
return z
}



function splitSci(obj,ele)
{
	
	
	var eLoc = ele.value.indexOf("E");
	if (eLoc != -1)
	{	

	var b = ele.value.substr(0,eLoc);
	var e = ele.value.substr(eLoc+1,(ele.value.length-eLoc));

	obj.base = b;
	obj.exp = e;
	}

}

function fromSci(obj)
{
	
	var numb=-1;
	if (obj.exp < 300)
	{
	numb = obj.base * Math.pow(10,obj.exp);	
	//console.debug("obj:"+obj+"   "+numb);
	}
	return numb;
		
}

function toScientfic(numb)
{
	var n = 0;
	var l = 0;
	var out = ""

	n = parseInt(numb);
	n = String(n);
	l = n.length;

	
	out = n.substr(0,1)+"."+n.substr(1,2)+"E"+String(n.length-1);
	return out;
}

function mSource(tot_Mana,cc,pet)
{
	var manaObj = tot_Mana;
	var petObj = pet;
	var cls = cc;
	
		console.debug("----manaObj_petObj_cls----");
		console.debug("manaObj.base:"+manaObj.base);
		console.debug("manaObj.exp:"+manaObj.exp);
		console.debug("petObj.base:"+petObj.base);
		console.debug("petObj.exp:"+petObj.exp);
		console.debug("cls:"+cls);
	
	var mGem = 0;
	var Grim = 0;
	var SF = 0;
	var ET = 0;
	var AD = 0;
	var CP = 0;
	var DR = 0;
	var Nex = 0;
	var ms = 0;
	
	if (cls == "Prod")
		{
			mGem = ((Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(15))/Math.log10(1.1475))+1;			
			Grim = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(240))/Math.log10(1.155)+1;
			SF   = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(3200))/Math.log10(1.1625)+1;
			ET   = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(54600))/Math.log10(1.17)+1;
			AD   = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(1180000))/Math.log10(1.1775)+1;
			CP   = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(282360000))/Math.log10(1.185)+1;
			DR   = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(6221250000))/Math.log10(1.1925)+1;
			Nex  = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(221913000000))/Math.log10(1.2)+1;
			console.debug(Number(manaObj.exp)+"+"+Number(petObj.exp)+"+"+Math.log10(Number(manaObj.base)*Number(petObj.base)))
		}else
		{
			mGem = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(15))/Math.log10(1.16)+1;
			Grim = (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(240))/Math.log10(1.17)+1;
			SF  =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(3200))/Math.log10(1.18)+1;
			ET  =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(54600))/Math.log10(1.19)+1;
			//console.debug("Log of costs:"+Math.log10(54600));
			//console.debug("Log of 1.19:"+Math.log10(1.19));
			//console.debug("Log of Bases:"+Math.log10(manaObj.base*petObj.base));
			AD  =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(1180000))/Math.log10(1.2)+1;
			CP  =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(282360000))/Math.log10(1.21)+1;
			DR  =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(6221250000))/Math.log10(1.22)+1;
			Nex =  (Number(manaObj.exp)+Number(petObj.exp)+Math.log10(Number(manaObj.base)*Number(petObj.base))-Math.log10(221913000000))/Math.log10(1.23)+1;
			console.debug(Number(manaObj.exp)+"+"+Number(petObj.exp)+"+"+Math.log10(Number(manaObj.base)*Number(petObj.base)))
		}
		
		console.debug("---mana Sources-(calculated)------");
		console.debug("mGem: "+mGem);
		console.debug("Grim: "+Grim);
		console.debug("SF: "+SF);
		console.debug("ET: "+ET);
		console.debug("AD: "+AD);
		console.debug("CP: "+CP);
		console.debug("DR: "+DR);
		console.debug("Nex: "+Nex);
		
		
		mS = parseInt(mGem+Grim+SF+ET+AD+CP+DR+Nex);
		console.debug("mS: "+mS);
	
	return mS
}

function format()
{
	//change Nomadic Wrists
	if(document.getElementById("Nomadic").value == "Rare")
	{
		document.getElementById("NWtxt").style.backgroundColor = "blue";
		document.getElementById("NWtxt").style.color = "white";
	}else if(document.getElementById("Nomadic").value == "Epic")
	{
		document.getElementById("NWtxt").style.color = "white";
		document.getElementById("NWtxt").style.backgroundColor = "purple";
	}else if(document.getElementById("Nomadic").value == "Leg")
	{
		document.getElementById("NWtxt").style.backgroundColor = "orange";
		document.getElementById("NWtxt").style.color = "black";
	}else
	{
		document.getElementById("NWtxt").style.color = "black";
		document.getElementById("NWtxt").style.backgroundColor = "white";
	}
	
	//change Hollow Eye Pendant
	if(document.getElementById("HollowEye").value == "Rare")
	{
		document.getElementById("HEPtxt").style.backgroundColor = "blue";
		document.getElementById("HEPtxt").style.color = "white";
	}else if(document.getElementById("HollowEye").value == "Epic")
	{
		document.getElementById("HEPtxt").style.color = "white";
		document.getElementById("HEPtxt").style.backgroundColor = "purple";
	}else if(document.getElementById("HollowEye").value == "Leg")
	{
		document.getElementById("HEPtxt").style.backgroundColor = "orange";
		document.getElementById("HEPtxt").style.color = "black";
	}else
	{
		document.getElementById("HEPtxt").style.color = "black";
		document.getElementById("HEPtxt").style.backgroundColor = "white";
	}

	//change Endless Pouches
	if(document.getElementById("Endless").options[document.getElementById("Endless").selectedIndex].innerHTML == "Rare")
	{
		document.getElementById("EPtxt").style.backgroundColor = "blue";
		document.getElementById("EPtxt").style.color = "white";
	}else if(document.getElementById("Endless").options[document.getElementById("Endless").selectedIndex].innerHTML== "Epic")
	{
		document.getElementById("EPtxt").style.color = "white";
		document.getElementById("EPtxt").style.backgroundColor = "purple";
	}else if(document.getElementById("Endless").options[document.getElementById("Endless").selectedIndex].innerHTML == "Legendary")
	{
		document.getElementById("EPtxt").style.backgroundColor = "orange";
		document.getElementById("EPtxt").style.color = "black";
	}else if(document.getElementById("Endless").options[document.getElementById("Endless").selectedIndex].innerHTML == "Uncommon")
	{
		document.getElementById("EPtxt").style.color = "white";
		document.getElementById("EPtxt").style.backgroundColor = "green";
	}else
	{
		document.getElementById("EPtxt").style.color = "black";
		document.getElementById("EPtxt").style.backgroundColor = "white";
	}
	
	//change Casque of Learning
	if(document.getElementById("Casque").options[document.getElementById("Casque").selectedIndex].innerHTML == "Rare")
	{
		document.getElementById("CLtxt").style.backgroundColor = "blue";
		document.getElementById("CLtxt").style.color = "white";
	}else if(document.getElementById("Casque").options[document.getElementById("Casque").selectedIndex].innerHTML== "Epic")
	{
		document.getElementById("CLtxt").style.color = "white";
		document.getElementById("CLtxt").style.backgroundColor = "purple";
	}else if(document.getElementById("Casque").options[document.getElementById("Casque").selectedIndex].innerHTML == "Legendary")
	{
		document.getElementById("CLtxt").style.backgroundColor = "orange";
		document.getElementById("CLtxt").style.color = "black";
	}else if(document.getElementById("Casque").options[document.getElementById("Casque").selectedIndex].innerHTML == "Uncommon")
	{
		document.getElementById("CLtxt").style.color = "white";
		document.getElementById("CLtxt").style.backgroundColor = "green";
	}else
	{
		document.getElementById("CLtxt").style.color = "black";
		document.getElementById("CLtxt").style.backgroundColor = "white";
	}
	
	//change The Great Journey
	if(document.getElementById("Great").options[document.getElementById("Great").selectedIndex].innerHTML == "Rare")
	{
		document.getElementById("GJtxt").style.backgroundColor = "blue";
		document.getElementById("GJtxt").style.color = "white";
	}else if(document.getElementById("Great").options[document.getElementById("Great").selectedIndex].innerHTML== "Epic")
	{
		document.getElementById("GJtxt").style.color = "white";
		document.getElementById("GJtxt").style.backgroundColor = "purple";
	}else if(document.getElementById("Great").options[document.getElementById("Great").selectedIndex].innerHTML == "Legendary")
	{
		document.getElementById("GJtxt").style.backgroundColor = "orange";
		document.getElementById("GJtxt").style.color = "black";
	}else if(document.getElementById("Great").options[document.getElementById("Great").selectedIndex].innerHTML == "Uncommon")
	{
		document.getElementById("GJtxt").style.color = "white";
		document.getElementById("GJtxt").style.backgroundColor = "green";
	}else
	{
		document.getElementById("GJtxt").style.color = "black";
		document.getElementById("GJtxt").style.backgroundColor = "white";
	}

	//change Artificer's Shoulderpads
	if(document.getElementById("Artificer").options[document.getElementById("Artificer").selectedIndex].innerHTML == "Rare")
	{
		document.getElementById("AStxt").style.backgroundColor = "blue";
		document.getElementById("AStxt").style.color = "white";
	}else if(document.getElementById("Artificer").options[document.getElementById("Artificer").selectedIndex].innerHTML== "Epic")
	{
		document.getElementById("AStxt").style.color = "white";
		document.getElementById("AStxt").style.backgroundColor = "purple";
	}else if(document.getElementById("Artificer").options[document.getElementById("Artificer").selectedIndex].innerHTML == "Legendary")
	{
		document.getElementById("AStxt").style.backgroundColor = "orange";
		document.getElementById("AStxt").style.color = "black";
	}else if(document.getElementById("Artificer").options[document.getElementById("Artificer").selectedIndex].innerHTML == "Uncommon")
	{
		document.getElementById("AStxt").style.color = "white";
		document.getElementById("AStxt").style.backgroundColor = "green";
	}else
	{
		document.getElementById("AStxt").style.color = "black";
		document.getElementById("AStxt").style.backgroundColor = "white";
	}
	
	//check boxes
	
	//progress week
	if(document.getElementById("progressWeek").checked == true)
	{
		document.getElementById("pwtxt").style.backgroundColor = "green";
		document.getElementById("pwtxt").style.color = "white";
	}else
	{
		document.getElementById("pwtxt").style.backgroundColor = "red";
		document.getElementById("pwtxt").style.color = "white";
	}
	
	//Much Potential Left  
	if(document.getElementById("muchPot").checked == true)
	{
		document.getElementById("mplTxt").style.backgroundColor = "green";
		document.getElementById("mplTxt").style.color = "white";
	}else
	{
		document.getElementById("mplTxt").style.backgroundColor = "red";
		document.getElementById("mplTxt").style.color = "white";
	}
	
	//Mighty Group
	if(document.getElementById("mightyGroup").checked == true)
	{
		document.getElementById("mgTxt").style.backgroundColor = "green";
		document.getElementById("mgTxt").style.color = "white";
	}else
	{
		document.getElementById("mgTxt").style.backgroundColor = "red";
		document.getElementById("mgTxt").style.color = "white";
	}
	
	//challenges
	if(document.getElementById("c10").checked == true)
	{
		document.getElementById("c10t").style.backgroundColor = "green";
		document.getElementById("c10t").style.color = "white";
	}else
	{
		document.getElementById("c10t").style.backgroundColor = "red";
		document.getElementById("c10t").style.color = "white";
	}
	if(document.getElementById("c17").checked == true)
	{
		document.getElementById("c17t").style.backgroundColor = "green";
		document.getElementById("c17t").style.color = "white";
	}else
	{
		document.getElementById("c17t").style.backgroundColor = "red";
		document.getElementById("c17t").style.color = "white";
	}
	if(document.getElementById("c18").checked == true)
	{
		document.getElementById("c18t").style.backgroundColor = "green";
		document.getElementById("c18t").style.color = "white";
	}else
	{
		document.getElementById("c18t").style.backgroundColor = "red";
		document.getElementById("c18t").style.color = "white";
	}
	if(document.getElementById("c19").checked == true)
	{
		document.getElementById("c19t").style.backgroundColor = "green";
		document.getElementById("c19t").style.color = "white";
	}else
	{
		document.getElementById("c19t").style.backgroundColor = "red";
		document.getElementById("c19t").style.color = "white";
	}
	if(document.getElementById("c37").checked == true)
	{
		document.getElementById("c37t").style.backgroundColor = "green";
		document.getElementById("c37t").style.color = "white";
	}else
	{
		document.getElementById("c37t").style.backgroundColor = "red";
		document.getElementById("c37t").style.color = "white";
	}
	if(document.getElementById("c38").checked == true)
	{
		document.getElementById("c38t").style.backgroundColor = "green";
		document.getElementById("c38t").style.color = "white";
	}else
	{
		document.getElementById("c38t").style.backgroundColor = "red";
		document.getElementById("c38t").style.color = "white";
	}
	if(document.getElementById("c39").checked == true)
	{
		document.getElementById("c39t").style.backgroundColor = "green";
		document.getElementById("c39t").style.color = "white";
	}else
	{
		document.getElementById("c39t").style.backgroundColor = "red";
		document.getElementById("c39t").style.color = "white";
	}
	if(document.getElementById("c67").checked == true)
	{
		document.getElementById("c67t").style.backgroundColor = "green";
		document.getElementById("c67t").style.color = "white";
	}else
	{
		document.getElementById("c67t").style.backgroundColor = "red";
		document.getElementById("c67t").style.color = "white";
	}
	if(document.getElementById("c70").checked == true)
	{
		document.getElementById("c70t").style.backgroundColor = "green";
		document.getElementById("c70t").style.color = "white";
	}else
	{
		document.getElementById("c70t").style.backgroundColor = "red";
		document.getElementById("c70t").style.color = "white";
	}
	if(document.getElementById("c71").checked == true)
	{
		document.getElementById("c71t").style.backgroundColor = "green";
		document.getElementById("c71t").style.color = "white";
	}else
	{
		document.getElementById("c71t").style.backgroundColor = "red";
		document.getElementById("c71t").style.color = "white";
	}
	if(document.getElementById("c95").checked == true)
	{
		document.getElementById("c95t").style.backgroundColor = "green";
		document.getElementById("c95t").style.color = "white";
	}else
	{
		document.getElementById("c95t").style.backgroundColor = "red";
		document.getElementById("c95t").style.color = "white";
	}
	if(document.getElementById("c96").checked == true)
	{
		document.getElementById("c96t").style.backgroundColor = "green";
		document.getElementById("c96t").style.color = "white";
	}else
	{
		document.getElementById("c96t").style.backgroundColor = "red";
		document.getElementById("c96t").style.color = "white";
	}
	if(document.getElementById("c97").checked == true)
	{
		document.getElementById("c97t").style.backgroundColor = "green";
		document.getElementById("c97t").style.color = "white";
	}else
	{
		document.getElementById("c97t").style.backgroundColor = "red";
		document.getElementById("c97t").style.color = "white";
	}
	
	if(document.getElementById("c98").checked == true)
	{
		document.getElementById("c98t").style.backgroundColor = "green";
		document.getElementById("c98t").style.color = "white";
	}else
	{
		document.getElementById("c98t").style.backgroundColor = "red";
		document.getElementById("c98t").style.color = "white";
	}
	
	if(document.getElementById("c99").checked == true)
	{
		document.getElementById("c99t").style.backgroundColor = "green";
		document.getElementById("c99t").style.color = "white";
	}else
	{
		document.getElementById("c99t").style.backgroundColor = "red";
		document.getElementById("c99t").style.color = "white";
	}
}
 
</script>

<button onclick="Calc();">Calculate</button>
</body>
</html>
